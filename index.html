<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Dominar demo</title>
		<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet"/>
		<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/github-gist.min.css" rel="stylesheet"/>
		<style type="text/css">
			.form-control-feedback {
    			pointer-events: auto;
    			cursor: pointer;
			}

			td.has-feedback .form-control-feedback {
				top: 9px;
				right: 7px;
			}
		</style>
	</head>
<script type="text/template" id="tmpl-basic-demo">
<form id="basic-demo-form">
  <div class="form-group">
    <label class="control-label">Username</label>
    <input name="username" type="text" class="form-control"/>
  </div>

  <div class="form-group">
    <label class="control-label">Notes</label>
    <textarea name="notes" class="form-control"></textarea>
  </div>

  <div class="form-group">
    <label class="control-label">Group</label>
    <select name="group" class="form-control">
      <option value="">Select a group</option>
      <option value="admin">Guest</option>
      <option value="admin">Admin</option>
    </select>
  </div>

  <button type="submit" class="btn btn-primary">Submit</button>
</form>
</script>
<script type="text/template" id="tmpl-basic-javascript">
var validator = new Dominar($('#basic-demo-form'), {
  username: {
    rules: 'required|min:3|max:10'
  },
  notes: {
    rules: 'required|min:5|max:20'
  },
  group: {
    rules: 'required|in:guest,admin'
  }
});
</script>


<script type="text/template" id="tmpl-customrule-demo">
<form id="customrule-demo-form">
  <div class="form-group">
    <label class="control-label">Custom validation (must be uppercase)</label>
    <input name="uppercase" type="text" class="form-control"/>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>
</script>

<script type="text/template" id="tmpl-customrule-javascript">
// Register the custom rule
Dominar.register('uppercase', function(value) {
  return value.toUpperCase() === value;
}, 'The :attribute must only be uppercase.');

var validator = new Dominar($('#customrule-demo-form'), {
  uppercase: {
    rules: 'required|uppercase'
  }
});
</script>


<script type="text/template" id="tmpl-custommsg-demo">
<form id="custommsg-demo-form">
  <div class="form-group">
    <label class="control-label">Username</label>
    <input name="username" type="text" class="form-control"/>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>
</script>

<script type="text/template" id="tmpl-custommsg-javascript">
var validator = new Dominar($('#custommsg-demo-form'), {
  username: {
    rules: 'required|min:5|max:10',
    customMessages: {
      required: 'You forgot this field, silly!',
      min: 'I need at least :min characters bro!',
      max:' Whoops, :attribute needs to be less than :max characters!'
    }
  }
});
</script>


<script type="text/template" id="tmpl-msgposition-demo">
<form id="msgposition-demo-form">
  <div class="form-group">
    <span class="help-block"></span>
    <label class="control-label">Custom error message position</label>
    <input name="error_ontop" class="form-control"/>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>
</script>

<script type="text/template" id="tmpl-msgposition-javascript">
var validator = new Dominar($('#msgposition-demo-form'), {
  error_ontop: {
    rules: 'required|min:99999'
  }
});
</script>


<script type="text/template" id="tmpl-array-demo">
<form id="array-demo-form">
  <table class="table table-bordered">
    <thead>
      <tr>
        <th>Friend Name</th>
        <th>Notes</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><input name="friends[0][name]" type="text" class="form-control friend-name"/></td>
        <td><input name="friends[0][notes]" type="text" class="form-control friend-notes"/></td>
      </tr>
      <tr>
        <td><input name="friends[1][name]" type="text" class="form-control friend-name"/></td>
        <td><input name="friends[1][notes]" type="text" class="form-control friend-notes"/></td>
      </tr>
    </tbody>
  </table>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>
</script>

<script type="text/template" id="tmpl-array-javascript">
var validator = new Dominar($('#array-demo-form'));
validator
  .add($('.friend-name'), {
    rules: 'required|min:3|max:10',
    container: 'td'
  })
  .add($('.friend-notes'), {
    rules: 'required|min:10|max:30',
    container: 'td'
  });
</script>


<script type="text/template" id="tmpl-reset-demo">
<form id="reset-demo-form">
  <div class="form-group">
    <input name="remove_icon_test" type="text" class="form-control" placeholder="Enter something and click the error icon..."/>
  </div>
</form>
</script>

<script type="text/template" id="tmpl-reset-javascript">
var $form = $('#reset-demo-form');
var validator = new Dominar($form, {
  remove_icon_test: {
    rules: 'required|min:99999',
    triggers: ['keyup'],
    delay: false
  }
});

$form.on('dominar.init-field', function(event) {
  var field = event.dominarField;
  if (field.getName() == 'remove_icon_test')
  {
    field.$feedback.on('click', function() {
      // Only remove if field is invalid:
      field.validate($.noop, function() {
        field.reset();
      });
    });
  }
});
</script>


<script type="text/template" id="tmpl-remoterule-demo">
<form id="remoterule-demo-form">
  <div class="form-group">
    <label class="control-label">Username available? ['admin' is not available]</label>
    <input name="username_async" type="text" class="form-control" placeholder="Enter a username and wait..."/>
  </div>
  <button type="submit" class="btn btn-primary">Check Username</button>
</form>
</script>

<script type="text/template" id="tmpl-remoterule-javascript">
var validator = new Dominar($('#remoterule-demo-form'), {
  username_async: {
    rules: 'required|min:1',
    remoteRule: function(desiredUsername) {
      // Simulate ajax request
      var dfd = $.Deferred();
      setTimeout(function() {
        // (Your server would do the validation)
        if (desiredUsername == 'admin')
        {
          return dfd.reject('You cannot have the username admin.');
        }
        return dfd.resolve();
     }, 1000);
     return dfd;
   }
  }
});
</script>

	<body>
		<div class="jumbotron">
			<div class="container">
				<h1>Dominar.js</h1>
				<p>Lightweight bootstrap validator inspired by Laravel.</p>
				<p><a href="http://github.com/garygreen/dominar/archive/master.zip" class="btn btn-lg btn-success"><i class="glyphicon glyphicon-chevron-down" style="top:3px;"></i> Download</a></p>
			</div>
		</div>

		<div class="container">
			<form>
				<h3>Basic field tests</h3>

				<div role="tabpanel">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#basic-demo" data-toggle="tab">Demo</a></li>
						<li><a href="#basic-html" data-toggle="tab">HTML</a></li>
						<li><a href="#basic-javascript" data-toggle="tab">Javascript</a></li>
					</ul>

					<div class="well tab-content">
						<div id="basic-demo" class="tab-pane active" data-match></div>
						<div id="basic-html" class="tab-pane" data-match></div>
						<div id="basic-javascript" class="tab-pane" data-match></div>
					</div>
				</div>

				<h3>Custom validation rule</h3>

				<div role="tabpanel">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#customrule-demo" data-toggle="tab">Demo</a></li>
						<li><a href="#customrule-html" data-toggle="tab">HTML</a></li>
						<li><a href="#customrule-javascript" data-toggle="tab">Javascript</a></li>
					</ul>

					<div class="well tab-content">
						<div id="customrule-demo" class="tab-pane active" data-match></div>
						<div id="customrule-html" class="tab-pane" data-match></div>
						<div id="customrule-javascript" class="tab-pane" data-match></div>
					</div>
				</div>

				<h3>Custom error messages</h3>

				<div role="tabpanel">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#custommsg-demo" data-toggle="tab">Demo</a></li>
						<li><a href="#custommsg-html" data-toggle="tab">HTML</a></li>
						<li><a href="#custommsg-javascript" data-toggle="tab">Javascript</a></li>
					</ul>

					<div class="well tab-content">
						<div id="custommsg-demo" class="tab-pane active" data-match></div>
						<div id="custommsg-html" class="tab-pane" data-match></div>
						<div id="custommsg-javascript" class="tab-pane" data-match></div>
					</div>
				</div>

				<h3>Customise error message position</h3>

				<div role="tabpanel">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#msgposition-demo" data-toggle="tab">Demo</a></li>
						<li><a href="#msgposition-html" data-toggle="tab">HTML</a></li>
						<li><a href="#msgposition-javascript" data-toggle="tab">Javascript</a></li>
					</ul>

					<div class="well tab-content">
						<div id="msgposition-demo" class="tab-pane active" data-match></div>
						<div id="msgposition-html" class="tab-pane" data-match></div>
						<div id="msgposition-javascript" class="tab-pane" data-match></div>
					</div>
				</div>

				<h3>Array validation</h3>
				<div role="tabpanel">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#array-demo" data-toggle="tab">Demo</a></li>
						<li><a href="#array-html" data-toggle="tab">HTML</a></li>
						<li><a href="#array-javascript" data-toggle="tab">Javascript</a></li>
					</ul>

					<div class="well tab-content">
						<div id="array-demo" class="tab-pane active" data-match></div>
						<div id="array-html" class="tab-pane" data-match></div>
						<div id="array-javascript" class="tab-pane" data-match></div>
					</div>
				</div>

				<h3>Remove error on click of icon</h3>

				<div role="tabpanel">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#reset-demo" data-toggle="tab">Demo</a></li>
						<li><a href="#reset-html" data-toggle="tab">HTML</a></li>
						<li><a href="#reset-javascript" data-toggle="tab">Javascript</a></li>
					</ul>

					<div class="well tab-content">
						<div id="reset-demo" class="tab-pane active" data-match></div>
						<div id="reset-html" class="tab-pane" data-match></div>
						<div id="reset-javascript" class="tab-pane" data-match></div>
					</div>
				</div>

				<h3>Asynchronous rule <code>remoteRule</code></h3>

				<div role="tabpanel">
					<ul class="nav nav-tabs">
						<li class="active"><a href="#remoterule-demo" data-toggle="tab">Demo</a></li>
						<li><a href="#remoterule-html" data-toggle="tab">HTML</a></li>
						<li><a href="#remoterule-javascript" data-toggle="tab">Javascript</a></li>
					</ul>

					<div class="well tab-content">
						<div id="remoterule-demo" class="tab-pane active" data-match></div>
						<div id="remoterule-html" class="tab-pane" data-match></div>
						<div id="remoterule-javascript" class="tab-pane" data-match></div>
					</div>
				</div>
			</form>
		</div>

		<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
		<script src="dist/dominar-standalone.js"></script>
		<script>			
			$('[data-match]').each(function() {
				var match = this.id.match(/(.*)-(.*)$/);
				var name = match[1];
				var type = match[2];

				switch (type)
				{
					case 'demo':
						var $tmpl = $('#tmpl-' + this.id);
						var $form = $('<form/>', { id: this.id + '-form' });
						$form.html($tmpl.html());
						$(this).append($form);
						break;

					case 'html':
						var $tmpl = $('#tmpl-' + name + '-demo');
						var $pre = $('<pre/>').text($tmpl.html());
						$pre.appendTo(this);
						hljs.highlightBlock($pre[0]);
						break;

					case 'javascript':
						var $tmpl = $('#tmpl-' + name + '-javascript');
						var $pre = $('<pre/>').text($tmpl.html());
						$pre.appendTo(this);
						eval('(function() {' + $pre.html() + '})()');
						hljs.highlightBlock($pre[0]);
						break;
				}
			});
		</script>
	</body>
</html>